Необходимо:
    - понять - какие переменные необходимо вынести в глобальную область:
        - к примеру скорость персонажа и противника
        - колличестов жизни
        - номер уровня и этажа

Для более высоких уровней - сделать случайный спавн аппонентов

Вариант игры №0011 - 
    - Девятка - 
        - так как на этаж 9 жизней
        - 9 уровней
        - в уровне №уровня*9 - этажей
    Правила:
        - Необходимо пройти все уровни, в уровнях все этажы.
        - На этаж дается 9 жизней,
        при столкновении с противником жизнь уменьшается на 1
        когда жизней 0 - при столкновении персонаж возвращается на начало уровня

        Чтобы пройти заново уровень (если 0 жизней и не хочется мучаться без доп жизней) -
        - прейдется вернуться на этаж (уровень если был 1 этаж уровня) назад и пройти его заново

    Есть 2 варианта:
        1 - это давать на этаж всего девять попыток 
        (тоесть - каждый раз при столкновении с противником отнимать 1 и отправлять в начало уровня)
        если жизни 0 возврат на предыдущий этаж
        - в этом варианте паузу делать так - что-бы полностью был виден уровень
        это даст возможность просчитать куда направиться, 
        - что-то вроде лаберинта 

        2 - это - давать бесконечное колличество попыток
        при столкновении с противником отнимать 1 жизни и идти дальше
        когда жизнь 0 при столкновении с противником персонаж возвращается на начало этажа
        что-бы пройти этаж заново(с 9 жизнями) необходимо пройти передыдущий этаж

        И конечно 3 - вариант - с бонусами и так далее

Проблемы 
    - при коллизии цыпляется и снизу или в центер 
    снизу исправил но когда в центер то катится по центру

    - ?????? расчитать высоту прыжка и высоту расположения блоков  ????


Далее:
    - перед этим необходимо подключить клавиатуру - подключил
    - проблема - персонаж после приземления не двигается
    - проблема - необходимо убрать повторный прыжок 

on_touch_down - работает совместно с collide_point(*touch.pos)
так можно определять к какому виджету прикаснулся:
    - нашел 2 варианта:
        -1 - писать on_touch_down в самом виджите (при создании класса виджета)
        пример - class Test_button(Button):
                     def on_touch_down(self, touch):
                         if self.collide_point(*touch.pos):
                             print("касание Test_button", touch)
        -2 - создавать через объект в главном окне
        пример - class NineTest(Widget): главный виджет
                     player = ObjectProperty(None) объекты из kv
                     btn = ObjectProperty(None)

                    def on_touch_down(self, touch):
                        if self.btn.collide_point(*touch.pos):
                            print("касание NineTest", touch)

        !!!Второй вариант перекрывает первый!!!


Вариант 2:
    - сделать весь экран из кубиков - и двигатся по ним?!!!


Необходимо:
    - понять как создавать виджиты под одним ид - что-бы не плодить ид
    (суть - пол и стены можно делать заранее, а промежуточные виджеты
    по которым движеться все - они имеют один вид и функцию с полом - как их делать ????)
    - как создовать виджиты - генерирую случайно или по определенным размерам и координатам ????
    - спавн объектов ????
    - уничтожение объектов ?????
    - ГЛАВНОЕ - как все это делать черезклассы !!!???

    необходимо использовать add_widget

Алгоритм движения аппонента:
    - создаем список - в него при первой коллизии с планкой записываем что-то, 
    затем далее при каждой последующей коллизии онг проверяет есть ли в списке это
    если да то ни чего не делает
    - удаление из списка происходит при отсутствии коллизии

Создание:
    Классы:
        players - каласс общий для цифр
            users - класс игрока
            bonus - класс бонусов
            opponent - класс противников
        levels - класс уровня
            storey - класс этажей

    Файлы и папки:

        1 - nine - главное окно, открывается при старте, при паузе, при переходах между уровнями и этажами
            Верхний блок:
                - ninebase - при входе, если зарегестрирован 
                переход к этажам(к ninelevel) и к девятке (к ninelevel9)
                - ninereg - окно при первом входе в игру(переход к ninebase)
            Нижний блок:
                - ninesprav - справка по игре, плюс возврат к nine
                - ninenull - В окне вопрос (уверены ли вы), что-то вроде и только потом и
                либо обнуление (сброс прогреса игры), и возвращает к nine, либо возврат (к nine)
            - кнопка - Выход - выход из приложения

        2 - ninelevel - основное игровое окно

        3 - ninelevel9 - игровое окно девятого уровня

        3 - /ninebd - папка для сохранения прогресса игры и фаил игроков
            - users 

        4 - /nineassets - папка с объектами (текстуры, картинки и так далее)

        5 - /ninetexts - папка с текстовыми файлами (описание игры, правила и так далее)




Игра (платформер) Девятка (NINE)
    - 9 уровней сложности (начинаем с 1 и до 9)
    - этажей на каждом уровне кратно 9 (или 1*9, 2*9, и так далее)
    - победа - пройти все этажи (их 324), плюс 81 этаж "девяткой.
        на последний уровень, можно попасть после прохождения любого уровня,
        при условии, что число игрока 9
        На девятом уровне, при столкновении - возвращает к предыдущему уровню +1(), и еденицей
        (если прошел третий уровень и с него попал на девятый
        если там обнулился - возвращаешся на первый этаж четвертого уровня единицей)

    Основная суть:
        Платформер лабиринт, этаж на одном экране. Персонаж начинает слева снизу, заканчивает, как правило, 
        вверху справа.
        Чтобы зайти на 9 уровень - необходимо стать девяткой 
        (можно зайти на 9 уровень после прохождения любого уровня - если игрок стал девяткой)
        Если прошел восемь уровней подряд (без перехода на девятый уровень(без попыток его пройти))
        то, можешь в любой момент пройти уровень любой, что-бы пополнить попытки
        - но если истратил все - то возврат к началу игры (полное обнуление).
        Если проходя уровни, хоть раз попытался пройти девятый, то после восьмого, неудача на девятом
        возвращает к первому уровню (полное обнуление)

    Полное обнуление - возможно при полном обнулении переход сразу к 2-му уровню

    Уровни:
        - каждый уровень имеет этажей - номер уровня * 9
        - прохождение уровня, дает колличество попыток пройти девятый уровень
            попытки: 2-й - 2 попытки, 3-й - 3 попытки и так далее (номер уровня = колличеству попыток)
        - возможно - 1-й уровень не будет давать попыток пройти 9-й уровень, 
        и максимальное число игрока на этом уровне - 3 или 5
    
    Кнопка обнуления - в любой момент можно нажав на нее, начать игру сначала, с 1-го уровня

    Сохранение:
        В нрачале каждого уровня -
        - в начале каждого этажа

    Персонаж:
        Начинаем с "1" и так до "9"
        Движения - влево, вправо и прыжок

    Бонусы:
        На этажах могут быть цифры - при столкновении с ними число игрока увеличивается на эту цифру

    Противник:
        Основной "0"
        Но могут быть и остальные цифры, кроме "9"
        На последнем этаже, и противник и игрок "9"

        При столкновении - 
            -с "0" - персонаж начинает этаж заново
            - с любой цифрой (кроме "9") - от персонажа отнимается то с чем столкнулся, 
            и наченает этаж заново с получившейся, после столкновения, цифрой
            если у противника число выше чем у игрока - то начинается уровень сначала
            а игрок становится "1" 
            - на 9-ом уровне при столкновении нчинается этаж сначала - и отнимается попытка прохождения
            если попыток 0 - полное обнуление

    Примечание:
        - Возможно:
            - при столкновении игрока с цифрой (кроме 0) -
            цифра игрока уменьшается, но он двигается дальше
            - на девятом этаже, отнимается попытка - 
            но игрок двигается дальше
            
    Этажи: - хотелось бы, случайное построение этажей
        - а 9-ий уровень вообще со случайным выбором уровня сложности этожа
        (можно, из 81 этажа, получить этажи 1-го уровня сложности, или 5-го или и так далее)

Алгоритмы:
    Персонаж - цифра - от 1 до 9 (ц_перса)
    Противник - цифра - от 0 - до 8, на девятом уровне только 0 и 9 (ц_прот)

    Движение:
        Персонаж:
            - влево
            кнопка со стрелкой влево (в левом нижнем угло экрана)
            при удержании персонаж движится влево (х -= х)
            движение до столкновения со стеной
            скорость - ?
            - вправо
            кнопка со стрелкой вправо (в правом углу экрана)
            при удержании персонаж движеться вправо (х += х)
            движение до столкновения со стеной
            скорость - ?
            - кнопка прыжка (над кнопками со стрелкой)
            при нажатии (y += y)
            если нет препятствия сверху
            скорость - ?
            высота - на высоту 2-х цифр(или одной, главное избегать коллизии)
            - свободное падение (гравитация)
            когда нет столкновения снизу - персонаж падает
            скорость падения = скорости прыжка
            при падении за пределы экрана - возврат к началу этожа

        Противник:
            - движется
            слева направо - до первого столкновения (с препятствием) и исчезает
            справа на лево - до первого столкновения (с препятствием) и исчезает
            вниз - свободное падение
            исчезают когда выходят за пределы экрана (вниз)

    Столкновения:
        - персонажа с "0" - персонаж возвращается в начало этожа 
        происходит перезагрузка этожа (иди примечание 1)
        - персонажа с цифрой (кроме 9) - 
        если (ц_перса > ц_прот) то (ц_перса - ц_прот) и персанаж и противник двигаются дальше (иди примечание 2)
        если (ц_перса = ц_прот) - ц_перса становится "1" и он возвращается в начало этожа
        происходит перезагрузка этожа (иди примечание 1)
        если (ц_перса < ц_прот) - ц_перса становится "1" и он переходит на первый этаж текущего уровня
        (в начало уровня)
        - персонажа с препятствием - ни чего не происходит 
        (просто не движется дальше)
        - персонаж с пустотой (выход за экран) - персонаж возвращается в начало этожа 
        происходит перезагрузка этожа (иди примечание 1)

        - противника с припятствием
        если противник "0" - исчезает 
        если цифра - (иди примечание 4)
        - противника с персонажем
        если противник "0" - движется дальше
        если противник цифра - (иди примечание 4)

        - на 9-ом уровне:
            - противник - только 9 и 0
            - персонаж - только 9
            при столкновении:
                - персонаж с 0 - переходит в начало уровня
                - персонаж с 9
                если попыток больше нуля - отнимается попытка, а персонаж двигается дальше
                если попытка последняя - переход на начало игры со сбросом всех достижений (полное обнуление)

    Примечание:
        1 - возможно, для усложнения, не перезагружать этаж, а только возвращать перса в начало
        а может, и перезагружать этаж.???
        2 - возможно после столкновения противника с персом
        (кроме, когда противник 0 или 9) противник исчезает, или для усложнения где-то оставлять
        3 - возможно перезагрузку этажа вынести на кнопку
        4 - возможно противника с цифрой оставлять, плюс менять ей направление движения при любом столкновении
        Перезагрузка уровня:
            - тут проблема - если перезагружать уровень то - обратно будут появлятся цифры увеличивающие цифру перса
            этого необходимо избегать
            - если перезагружать то возвращать первоначальные данные
            - или просто возвращать перса в начало без перезагрузки уровня,
            - или при перезагрузке - убирать все бонусы с уровня
            - или делать так - что-бы бонус на уровне можно получить один раз за игру
            в таком случае после прохождения 8-го уровня (всех этажей),
            после последнего этажа - персу присваивать 9
        Колличество девяток(попыток пройти девятый уровень):
            - возможно попытки ввести в этажи как бонусы

Внешний вид:
    
    Окна:
        - Первоначальное окно 1 (при первом входе)
            - ввод имени игрока (проверка на ненормативную лексику и используемые символы)
            - краткое опесание игры
            - Кнопки:
                - войти (активна после ввода имени игрока)
                - справка
                - выход
        - Первоначальное окно 2 (вход после регистрации возможно и окно паузы)
            - Имя игрока
            - колличество попыток для 9-го этажа
            Текущий уровень и этаж:
                - ни чего не отображается если активна кнопка - Начать
                - отображается текущий уровень (при переходе на этаж и уровень)
                - отображается текущий уровень и этаж (при кнопке продолжить)
            - Кнопки:
                - продолжить:
                    - заменяется (при переходе между уровнями) на кнопки 
                        - переход на 9-й уровень (активна если перс 9)
                        - переход на следующий уровень (указывается следующий уровень)
                    - заменяется - на номер этажа (при переходе между этажами)
                    - заменяется - на Начать (при начале игры)
                - справка - описание игры и ее правил
                - начать заново - этаж (возможно эта кнопка не нужна), не активна при Начать
                - начать заново - уровень (происходит сброс достижений за уровень) не активна при Начать
                - начать заново - игру (полное обнуление) не активна при Начать
                - сменить имя игрока - выбор с обнулением или нет
                - выход

            Окно перехода между уровнями:
                Возможно это Первоначальное окно 2 - с поздравлением и измененной кнопкой продолжить
                - Надпись (что-то вроде - поздравления с пожеланиями)
                - Кнопки:
                    - переход на 9-й уровень (активна если перс 9)
                    - переход на следующий уровень
                    - переход на начальный экран 2
                    - выход

            Окно перехода между этажами:
                Возможно и тут окно паузы (Первоначальное окно 2)
                с заменой продолжить на - следующий этаж (такой-то)
                - Что-то вроде - 
                Вы (такойто) переходите на такойто этаж
                - прогресс загрузки

        Игровое окно:
            - два варианта:
                - 1 - кнопки и инфо - снизу
                - 2 - кнопки движения внизу по бокам, инфо о другие кнопки вверху по центру
            Информация:
                - Имя игрока (плюс текущая его цифра)
                - колличество девяток(попыток пройти девятый этаж)
                - текущий уровень и этаж
            Кнопки:
                - двигать влево (слева внизу)
                - двигать вправо(справа внизу)
                - прыжок - над кнопками влево и вправо
                - кнопка паузы

            Можно сделать кнопки:
                - влево и вправо с права
                - прыжок слева
                - пауза по центру
                - инфа по центру (по сторонам кнопки пауза)

Бонусы:
    - цифры (от 1 до 8) - увеличивают число игрока но не более 9
    - девятки - увеличивают колличество попыток прохождения девятого уровня


    self.player.move_player()

        if self.player.vel_player_y != 0:

            for blok_l in self.blok_list.keys():
            
                if self.player.collide_widget(blok_l):
                    
                    self.collision_list[self.player] = blok_l
                    self.player.vel_player_y = 0

        elif self.collision_list.get(self.player):
        #self.collision_list.get(self.player)
            if self.player.collide_widget(self.collision_list[self.player]): 
                print(self.collision_list[self.player])
            else:
                self.collision_list.pop(self.player)
                self.player.vel_player = (0, -2)
                print(self.collision_list)

        else:
            self.player.vel_player_y = -2